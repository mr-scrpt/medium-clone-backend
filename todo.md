Вынести переиспользванный код в функции
Вместо подключения репозиториев в сервисах, сделать методы в других сервисах и использовать их вместо репозиториев
